var Fei=window.Fei={version:"1.0.0"};!function(){var t={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},e=function(){return div=document.createElement("div"),div.setAttribute("class","t"),"t"===div.className}(),i=Object.prototype,n=i.toString,r=["valueOf","toLocaleString","toString","constructor"],a=Fei.utils={getScrollTop:function(t){return t=t||document,Math.max(t.documentElement.scrollTop,t.body.scrollTop)},getScrollLeft:function(t){return t=t||document,Math.max(t.documentElement.scrollLeft,t.body.scrollLeft)},getCoord:function(t){var e=0,i=0;if(document.documentElement.getBoundingClientRect){var n=t.getBoundingClientRect(),r=t.ownerDocument;navigator.userAgent.indexOf("MSIE 6.0")>=0?(e=n.top-2+a.getScrollTop(r),i=n.left-2+a.getScrollLeft(r)):(e=n.top+a.getScrollTop(r),i=n.left+a.getScrollLeft(r))}else for(;t.offsetParent;)e+=t.offsetTop,i+=t.offsetLeft,t=t.offsetParent;return{top:e,left:i}},setAttr:function(i,n,r){return i?(i.setAttribute(e?n:t[n]||n,r),"style"===n&&(i.style.cssText=r),i):i},getAttr:function(i,n){return i.getAttribute(e?n:t[n]||n)},createElement:function(t,e){var i=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",t):document.createElement(t);if(e)for(var n in e)a.setAttr(i,n,e[n]);return i},removeChildren:function(t){for(var e=t.childNodes,i=e.length-1;i>=0;i--)t.removeChild(e.item(i))},getBrowserStyle:function(t,e){for(var i=["","-o-","-ms-","-moz-","-webkit-"],n="",r=0;r<i.length;r++)n+=i[r]+t+":"+e+";";return n},addEvent:function(t,e,i,n){if(!t)return t;var r=function(){i.apply(n||this,arguments)};t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r},getGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)})},clone:function(t){if(null===t||void 0===t)return t;if(t.nodeType&&t.cloneNode)return t.cloneNode(!0);var e,i,o,s,h,l=n.call(t);if("[object Date]"===l)return new Date(t.getTime());if("[object Array]"===l)for(e=t.length,s=[];e--;)s[e]=a.clone(t[e]);else if("[object Object]"===l&&t.constructor===Object){s={};for(h in t)s[h]=a.clone(t[h]);if(r)for(i=r.length;i--;)o=r[i],t.hasOwnProperty(o)&&(s[o]=t[o])}return s||t},isUseVml:function(){var t=navigator.userAgent.toLowerCase(),e=!!window.ActiveXObject||"ActiveXObject"in window,i=e&&t.indexOf("msie")>-1&&8===parseInt(t.match(/msie ([\d.]+)/)[1]),n=e&&t.indexOf("msie")>-1&&parseInt(t.match(/msie ([\d.]+)/)[1])<8;return function(t){return i||n}}()}}(),function(){var t=Fei.utils;if(t.isUseVml()){{Fei.ieRotate={rotate:function(e,i){if(!e)return e;if(0!==this.length&&"undefined"!=typeof i){"number"==typeof i&&(i={angle:i});var n;if(e.Fei&&e.Fei.PhotoEffect)e.Fei.PhotoEffect._handleRotation(i),n=e.Fei.PhotoEffect._rootObj;else{var r=t.clone(i);n=new Fei.PhotoEffect(e,r)._rootObj}return n}}}}Fei.PhotoEffect=function(t,e){if(this._img=t,this._onLoadDelegate=[e],this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Fei={PhotoEffect:this},t.parentNode.insertBefore(this._rootObj,t),t.complete)this._Loader();else{var i=this;t.onload=function(){i._Loader.call(i)},t.onreadystatechange=function(){"complete"==this.readyState&&i._Loader.call(i)}}},Fei.PhotoEffect.prototype={_setupParameters:function(t){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof t.angle&&(this._angle=t.angle),this._parameters.animateTo="number"==typeof t.animateTo?t.animateTo:this._angle,this._parameters.step=t.step||this._parameters.step||null,this._parameters.easing=t.easing||this._parameters.easing||this._defaultEasing,this._parameters.duration=t.duration||this._parameters.duration||1e3,this._parameters.callback=t.callback||this._parameters.callback||this._emptyFunction,this._parameters.center=t.center||this._parameters.center||["50%","50%"],this._rotationCenterX="string"==typeof this._parameters.center[0]?parseInt(this._parameters.center[0],10)/100*this._imgWidth*this._aspectW:this._parameters.center[0],this._rotationCenterY="string"==typeof this._parameters.center[1]?parseInt(this._parameters.center[1],10)/100*this._imgHeight*this._aspectH:this._parameters.center[1],t.bind&&t.bind!=this._parameters.bind&&this._BindEvents(t.bind)},_emptyFunction:function(){},_defaultEasing:function(t,e,i,n,r){return-n*((e=e/r-1)*e*e*e-1)+i},_handleRotation:function(t,e){this._setupParameters(t),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(t){if(t&&this._eventObj){if(this._parameters.bind){this._parameters.bind}this._parameters.bind=t}},_Loader:function(){return function(){var t=this._img.width,e=this._img.height,i=this._img.style.top,n=this._img.style.left,r=this._img.style.cursor;this._imgWidth=t,this._imgHeight=e,this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height="100%",this._vimage.style.width="100%",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._vimage.setAttribute("id",this._img.getAttribute("id")+"_img"),this._aspectW=this._aspectH=1,this._container=this.createVMLNode("group"),this._container.style.width=t,this._container.style.height=e,this._container.style.position="absolute",this._container.style.top="0px",this._container.style.left="0px",this._container.setAttribute("coordsize",t-1+","+(e-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=t+"px",this._rootObj.style.height=e+"px",this._rootObj.style.top=i,this._rootObj.style.left=n,this._rootObj.style.cursor=r,this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj;for(var a;a=this._onLoadDelegate.shift();)this._handleRotation(a,!0)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var t=+new Date,e=t-this._animateStartTime>this._parameters.duration;if(e&&!this._parameters.animatedGif)clearTimeout(this._timer);else{if(this._canvas||this._vimage||this._img){var i=this._parameters.easing(0,t-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration);this._rotate(~~(10*i)/10)}this._parameters.step&&this._parameters.step(this._angle);var n=this;this._timer=setTimeout(function(){n._animate.call(n)},10)}this._parameters.callback&&e&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){Math.PI/180;return function(t){this._angle=t,this._container.style.rotation=t%360+"deg",this._vimage.style.top=-(this._rotationCenterY-this._imgHeight/2)+"px",this._vimage.style.left=-(this._rotationCenterX-this._imgWidth/2)+"px",this._container.style.top=this._rotationCenterY-this._imgHeight/2+"px",this._container.style.left=this._rotationCenterX-this._imgWidth/2+"px"}}(),createVMLNode:function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<rvml:"+t+' class="rvml">')}}catch(t){return function(t){var e=document.createElement(t);return e.setAttribute("class","rvml"),e.setAttribute("className","rvml"),e.setAttribute("xmlns","urn:schemas-microsoft.com:vml"),e}}}()}}}(),function(){var t=Fei.utils,e=Fei.fImage=function(e){var i=this;if(i.isLoaded=!1,i.src="",i.orgWidth=0,i.orgHeight=0,i.width=0,i.height=0,i.rotation=0,i.translateSpeed=300,i.translates={y:0,x:0},i.domId="fei_imgview_"+t.getGuid(),i.dom=t.createElement("img",{id:i.domId}),i.onload=function(){},e)for(var n in e)i[n]=e[n];i.orgTranslateSpeed=i.translateSpeed};e.prototype={init:function(){var t=this;return t.src&&t.setSrc(t.src),t.dom.complete?t.imgLoad.call(t):(t.dom.onload=function(){t.imgLoad.call(t)},t.dom.onreadystatechange=function(){"complete"==this.readyState&&t.imgLoad.call(t)}),t},imgLoad:function(){var t=this;if(!t.isLoaded){t.isLoaded=!0;try{var e=new Image;e.src=t.src,t.width=e.width,t.height=e.height,t.orgWidth=e.width,t.orgHeight=e.height,t.rotation=0,delete e}catch(i){}t.onload&&t.onload.call(window,t)}},setSrc:function(t){var e=this;return e.isLoaded=!1,e.src=t||e.src,e.dom.src=e.src,e.dom.complete&&e.imgLoad.call(e),e},doChange:function(){var e=this,i=document.getElementById(e.domId);if(i){if(t.isUseVml()){if(i.style.left=e.translates.x+"px",i.style.top=e.translates.y+"px",!e.isMoveing){i.style.cursor="move",i.style.width=e.width+"px",i.style.height=e.height+"px";var n=i.children||i.childNodes;if(n.length>0){var r=n[0];r.style.width=e.width+"px",r.style.height=e.height+"px"}Fei.ieRotate.rotate(document.getElementById(e.domId),{animateTo:e.rotation,duration:e.translateSpeed})}}else{var a="cursor:move;width:"+e.width+"px;height:"+e.height+"px;";a+=t.getBrowserStyle("transform","translate("+e.translates.x+"px,"+e.translates.y+"px) rotate("+e.rotation+"deg)"),e.translateSpeed>0&&(a+=t.getBrowserStyle("transition","all "+e.translateSpeed/1e3+"s ease")),t.setAttr(i,"style",a)}return e}},scale:function(t,e,i){var n=this,r=n.rotation%360,a=n.getAdSize(),o=0,e=e||.5,i=i||.5;(90===r||270===r||-90===r||-270===r)&&(o=(a.h-a.w)/2);var s=n.translates.x-(n.width-a.w)/2+o-(n.width*t-n.width)*e,h=n.translates.y-(n.height-a.h)/2-o-(n.height*t-n.height)*i;return n.width=n.width*t,n.height=n.height*t,n.transition(s,h),n},transition:function(t,e){var i=this;return i.translates.y=e,i.translates.x=t,i},rotate:function(t){var e=this;return e.rotation=e.rotation+t,e},getAdSize:function(){var t=this,e=t.rotation%360,i=t.width,n=t.height;return(90===e||270===e||-90===e||-270===e)&&(i=t.height,n=t.width),{w:i,h:n}},setAdSize:function(t,e){var i=this,n=i.rotation%360;return 90===n||270===n||-90===n||-270===n?(i.height=t,i.width=e):(i.height=e,i.width=t),i},getOrgSize:function(){var t=this,e=t.rotation%360,i=t.orgWidth,n=t.orgHeight;return(90===e||270===e||-90===e||-270===e)&&(i=t.orgHeight,n=t.orgWidth),{w:i,h:n}}}}(),function(){var t=Fei.utils,e=Fei.fImagePanel=function(e){var i=this;if(i.width=0,i.height=0,i.images=[],i.currentIndex=0,i.dom=t.createElement("div",{style:"position:relative;text-align:left;width:100%;height:100%;display:block;overflow:hidden;"}),e)for(var n in e)i[n]=e[n]};e.prototype={initImage:function(e){var i=this;return i.image=new Fei.fImage({src:e||"",container:i,onload:function(){i.stretchOptimally().centerImage().doChange()}}),e||i.image.setSrc(i.images[i.currentIndex]),t.removeChildren(i.dom),i.dom.appendChild(i.image.dom),i.image.init(),i.initEvents(),i},render:function(e){var i=this;return(e||document.body).appendChild(i.dom),i.width=i.dom.offsetWidth,i.height=i.dom.offsetHeight,i.coord=t.getCoord(i.dom),i.initImage(),i},setImages:function(t){var e=this;return e.images=t,e.currentIndex=0,e.image.setSrc(e.images[e.currentIndex]),e},initEvents:function(){var e=this,i=document.getElementById(e.image.domId);return t.addEvent(i,"mousedown",e.mousedown,e),t.addEvent(i,"mousemove",e.mousemove,e),t.addEvent(i,"mouseup",e.mouseup,e),t.addEvent(i,"mouseout",e.mouseup,e),"onmousewheel"in document.documentElement?t.addEvent(i,"mousewheel",e.mousewheel,e):t.addEvent(i,"DOMMouseScroll",e.mousewheel,e),e},mousewheel:function(t){var e=this,t=t||window.event,i=t.wheelDelta,n=1,r=e.coord,a=t.clientX,o=t.clientY,s=e.image;void 0===i&&(i=0-(t.detail||0)),n=i>0?1.1:.9;var h={top:o-r.top-s.translates.y,left:a-r.left-s.translates.x};s.scale(n,h.left/s.width,h.top/s.height).doChange(),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),window.event?window.event.returnValue=!1:t.preventDefault()},mousedown:function(t){var e=this,t=t||window.event,i=e.image;e.lastTranslateX=i.translates.x,e.lastTranslateY=i.translates.y,e.moveStartX=t.x||t.clientX,e.moveStartY=t.y||t.clientY,e.isMoveing=!0,i.isMoveing=!0,i.translateSpeed=0,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),window.event?window.event.returnValue=!1:t.preventDefault()},mousemove:function(t){var e,i=this,t=t||window.event;if(i.isMoveing){e=i.image;var n=(t.x||t.clientX)-i.moveStartX+i.lastTranslateX,r=(t.y||t.clientY)-i.moveStartY+i.lastTranslateY;i.image.transition(n,r).doChange()}t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),window.event?window.event.returnValue=!1:t.preventDefault()},mouseup:function(t){var e=this;e.isMoveing=!1,e.image.isMoveing=!1,e.image.translateSpeed=e.image.orgTranslateSpeed},doChange:function(){var t=this,e=t.image;return e.doChange(),t},stretchH:function(){var t=this,e=t.image,i=e.getOrgSize();return e.setAdSize(t.width,i.h*t.width/i.w),t},stretchV:function(){var t=this,e=t.image,i=e.getOrgSize();return e.setAdSize(i.w*t.height/i.h,t.height),t},originalOptimally:function(){var t=this,e=t.image;return e.width=e.orgWidth,e.height=e.orgHeight,t},stretchOptimally:function(){var t=this,e=t.image,i=e.getOrgSize(),n=e.getAdSize();return i.h<=t.height&&i.w<=t.width?t.originalOptimally():n.w*t.height/n.h>t.width?t.stretchH():t.stretchV(),t},centerImage:function(){var t=this,e=t.image,i=e.rotation%360,n=e.getAdSize(),r=0;(90===i||270===i||-90===i||-270===i)&&(r=(n.h-n.w)/2);var a=(t.width-n.w)/2-r,o=(t.height-n.h)/2+r;return e.transition(a,o),t},rotate:function(t){var e=this,i=e.image;return i.rotate(t),e},scale:function(t){var e=this,i=e.image;return i.scale(t),e},switchTo:function(e){var i=this,n=i.image;return t.isUseVml()?i.initImage(i.images[e]):n.setSrc(i.images[e]),i},nextImage:function(){{var t=this;navigator.userAgent.toLowerCase(),t.image}return t.currentIndex++,t.currentIndex>t.images.length-1&&(t.currentIndex=0),t.switchTo(t.currentIndex),t},upImage:function(){{var t=this;t.image}t.currentIndex--,t.currentIndex<0&&(t.currentIndex=t.images.length-1),t.switchTo(t.currentIndex)},getImage:function(){{var t=this;t.image}return t.image}}}();