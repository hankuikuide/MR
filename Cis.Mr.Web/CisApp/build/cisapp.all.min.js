Ext.ns("CisApp.Common").Util={getCcFlagClassify:function(t){return function(n,r,e){var a=n.replace("0","无").replace("1","普通").replace("2","严重");return t&&null!==r&&(r.tdAttr='data-qtip="'+a+'"'),a}},getDrgType:function(t){return function(n,r,e){var a=n.replace("M","内科").replace("S","外科");return t&&null!==r&&(r.tdAttr='data-qtip="'+a+'"'),a}},dataCodeToTextRender:function(t){return function(n){if(void 0!==n&&null!==n&&""!==n){var r=Ext.Array.findBy(t,function(t,r){return t.Code==n});if(r)return r.Text}return""}},jsonDataToTextRender:function(t){return function(n){var r=Ext.decode(n),e="";if(r){for(var a in r){var i=Ext.Array.findBy(t,function(t,n){return t.Value==a});if(i){var u=r[a];""!==u.trim()?i.IsEnum&&(u=CisApp.Common.Util.dataCodeToTextRender(Ext.ns("CisApp.Server.Datas")[i.EnumName])(r[a])):u="修改为空",e+=i.Text+":"+u+";"}}e.length<1&&(e="未修改内容")}else e="未修改内容";return e}}};
var appFactory=fmCommonFactory({appName:"CisApp"});
Ext.ns("CisApp.Common").Core={Shared:{getMenuData:function(){var e=CisApp.Server.Datas.Menus,r=function(t,a){for(var n=Ext.Array.filter(e,function(e,r){return e.ParentId===t&&"_"!==e.Name}),i=0;i<n.length;i++){var u=n[i];a||(u.iconCls=u.Icon&&""!=Ext.String.trim(u.Icon)?u.Icon:"fa fa-chevron-right"),u.ViewParams&&"string"==typeof u.ViewParams&&(u.ViewParams=Ext.JSON.decode(u.ViewParams)),u.text=u.Name;var o=r(u.Id,!0);o.length>0?u.children=o:u.leaf=!0}return n};return r(0)},getForData:function(e){var r=function(e,t){if(e){for(var a=[],n=0;n<e.length;n++){if(!Ext.isArray(e[n].Value)){for(var i=[],u=0;u<e.length;u++)i[u]={GroupRuleBit:t+"|"+e[u].RuleBit,RuleBit:e[u].RuleBit,value:e[u].RuleBit,text:e[u].Name,Id:e[u].Id,leaf:!0,checked:!1};return i}a[n]={text:e[n].Text,leaf:!1,checked:!1,children:r(e[n].Value,e[n].Text)}}return a}};return r(e)}}};
Ext.ns("CisApp.Config.drgsapi.MedicalSeach"),CisApp.Config.drgsapi.MedicalSeach={Items:function(){return[{configIndex:1,xtype:"shared_hospitalcombo",fieldLabel:"医疗机构",multiSelect:!1,editable:!0,isPopWindow:!0,configMustShow:!0,bind:{value:"{seachData.HospitalId}",hidden:"{orgCode}"}},{configIndex:2,xtype:"textfield",fieldLabel:"社保卡号",bind:"{seachData.BmiNo}",name:"bmiNo"},{configIndex:3,xtype:"textfield",fieldLabel:"住院号",bind:"{seachData.AdmissionNo}"},{configIndex:4,xtype:"textfield",fieldLabel:"参保人",bind:"{seachData.PatientName}"},{configIndex:5,xtype:"combo",fieldLabel:"填报状态",bind:"{seachData.IsUpload}",store:appFactory.Data.getDataStore("EnumIsUpload"),displayField:"Text",valueField:"Value",emptyText:"请选择",listeners:{change:"isUploadSelected"}},{configIndex:6,xtype:"combo",name:"comboValidateSearchFlag",fieldLabel:"校验结果",store:appFactory.Data.getDataStore("EnumValidateFlagView"),displayField:"Text",valueField:"Value",emptyText:"请选择",disabled:!0,bind:{disabled:"{comboValidateEnabled}",value:"{seachData.DataValidateFlag}"}},{configIndex:8,xtype:"daterange",fieldLabel:"结算日期",width:372,colspan:2,items:[{format:"Y-m-d",editable:!1,bind:"{seachData.AdmissionDateS}"},{labelSeparator:"",format:"Y-m-d",editable:!1,bind:"{seachData.AdmissionDateE}"}]}]}};
Ext.ns("CisApp.Config.drgsyb.Drgsyb"),CisApp.Config.drgsyb.Drgsyb={Items:function(){return[{configIndex:1,xtype:"shared_hospitalcombo",fieldLabel:"医疗机构",multiSelect:!1,editable:!0,isPopWindow:!0,configMustShow:!0,bind:"{seachData.OrgCode}"},{configIndex:2,xtype:"monthdatefield",fieldLabel:"结算月份",bind:"{seachData.YearMonth}",format:"Y-m",editable:!1},{configIndex:3,xtype:"combo",fieldLabel:"人员类别",bind:"{seachData.BenefitGroup}",store:appFactory.Data.getDataStore("BenefitGroupsParent"),displayField:"Text",valueField:"Value",emptyText:"请选择"}]}};
Ext.ns("CisApp.Config.drgsyb.DrgsybChart"),CisApp.Config.drgsyb.DrgsybChart={Items:function(){return[{configIndex:1,xtype:"shared_hospitalcombo",fieldLabel:"医疗机构",multiSelect:!1,editable:!0,isPopWindow:!0,configMustShow:!0,bind:"{seachData.OrgCode}"},{configIndex:2,xtype:"monthdatefield",fieldLabel:"结算月份",bind:"{seachData.YearMonth}",format:"Y-m",editable:!1}]}};
Ext.ns("CisApp.Config.hospitalseach.MedicalSeach"),CisApp.Config.hospitalseach.MedicalSeach={Items:function(){return[{configIndex:1,xtype:"shared_hospitalcombo",fieldLabel:"医疗机构",multiSelect:!1,editable:!0,isPopWindow:!0,configMustShow:!0,bind:{value:"{seachData.HospitalId}",hidden:"{orgCode}"}},{configIndex:2,xtype:"textfield",fieldLabel:"住院号",bind:"{seachData.AdmissionNo}"},{configIndex:4,xtype:"daterange",fieldLabel:"上传时间",width:372,colspan:2,items:[{format:"Y-m-d",editable:!1,bind:"{seachData.AdmissionDateS}"},{labelSeparator:"",format:"Y-m-d",editable:!1,bind:"{seachData.AdmissionDateE}"}]}]}};
Ext.ns("CisApp.Config.share.Check"),CisApp.Config.share.Check={ColumnsList:function(){return[{configIndex:0,xtype:"rownumberer",width:50,text:"序号"},{configIndex:1,text:"检查单号",dataIndex:"CheckId",width:100},{configIndex:3,text:"申请科室名称",dataIndex:"DepartmentName",width:120},{configIndex:6,text:"申请项目编码",dataIndex:"ApplyProjectCode",renderer:function(t,e){return e&&(e.tdAttr='data-qtip="'+t+'"'),t},width:120},{configIndex:7,text:"申请项目名称",dataIndex:"ApplyProjectName",renderer:function(t,e){return e&&(e.tdAttr='data-qtip="'+t+'"'),t},width:120,showTip:!0},{configIndex:8,text:"申请医师编码",dataIndex:"ApplyDoctor",width:100},{configIndex:14,text:"申请医师名称",dataIndex:"ApplyDoctorName",width:100},{configIndex:9,text:"申请时间",dataIndex:"ApplyDatetime",renderer:Fm.Common.Util.dateRender(),width:150},{configIndex:10,text:"报告时间",dataIndex:"ReportDatetime",renderer:Fm.Common.Util.dateRender(),width:150},{configIndex:11,text:"检查部位",dataIndex:"CheckPositionCodeName",width:100,showTip:!0},{configIndex:12,text:"报告结果",dataIndex:"Result",renderer:function(t,e){return e&&(e.tdAttr='data-qtip="'+t+'"'),t},width:100,showTip:!0},{configIndex:13,text:"异常提示",dataIndex:"AbnormalName",renderer:function(t,e){return e&&(e.tdAttr='data-qtip="'+t+'"'),t},minWidth:100,flex:1,showTip:!0}]}};
Ext.ns("CisApp.Config.share.Diagnosis"),CisApp.Config.share.Diagnosis={Lists:function(){return[{configIndex:0,header:"序号",dataIndex:"NumRow",width:50,align:"center",configMustShow:!0},{configIndex:1,header:"编码",dataIndex:"GenericCode",flex:2,configMustShow:!0,showTip:!0},{configIndex:2,header:"名称",dataIndex:"GenericName",flex:2,align:"left",configMustShow:!0,showTip:!0},{configIndex:3,header:"拼音缩写",dataIndex:"MnemonicCode",flex:2,align:"left",configMustShow:!0}]}};
Ext.ns("CisApp.Config.share.Operation"),CisApp.Config.share.Operation={ColumnsList:function(){return[{configIndex:0,xtype:"rownumberer",width:50,text:"序号"},{configIndex:1,text:"手术记录序号",dataIndex:"OperationRecordNo"},{configIndex:2,text:"手术医师",dataIndex:"OperationDoctorName",renderer:function(t,e){return e&&(e.tdAttr='data-qtip="'+t+'"'),t},width:100,showTip:!0},{configIndex:3,text:"手术医师I助",dataIndex:"FirstOperDoctorName",renderer:function(t,e){return e&&(e.tdAttr='data-qtip="'+t+'"'),t},width:100},{configIndex:4,text:"手术医师II助",dataIndex:"SecondOperDoctorName",renderer:function(t,e){return e&&(e.tdAttr='data-qtip="'+t+'"'),t},width:100},{configIndex:5,text:"麻醉师",dataIndex:"AnesthesiologistName",showTip:!0},{configIndex:11,text:"记录医师",width:100,dataIndex:"RecordDoctorName",showTip:!0},{configIndex:6,text:"执行开始时间",width:200,dataIndex:"OperationDate",renderer:Fm.Common.Util.dateRender(),showTip:!0},{configIndex:7,text:"执行结束时间",width:200,dataIndex:"OperationFinishDate",renderer:Fm.Common.Util.dateRender(),showTip:!0},{configIndex:8,text:"麻醉方式",dataIndex:"AnaesthesiaTypeName",renderer:function(t,e){return e&&(e.tdAttr='data-qtip="'+t+'"'),t},showTip:!0},{configIndex:9,text:"并发症",width:200,dataIndex:"ComplicationName",renderer:function(t,e){return e&&(e.tdAttr='data-qtip="'+t+'"'),t},showTip:!0},{configIndex:10,text:"手术记录",dataIndex:"OperationRecord",xtype:"widgetcolumn",widget:{xtype:"label",cisBindProperty:{html:{dataIndex:"OperationRecord",renderer:function(t){return null==t&&(t=""),'<a href="javascript:void(0)">'+t+"</a>"}}},handler:"showRemarkContent",showTip:!0},minWidth:100,flex:1}]}};
Ext.ns("CisApp.Config.share.OperationDetail"),CisApp.Config.share.OperationDetail={ColumnsList:function(){return[{configIndex:0,xtype:"rownumberer",text:"序号",width:50},{configIndex:1,text:"手术序号",dataIndex:"OperationNo"},{configIndex:3,text:"手术名称",dataIndex:"OperationDetailName",showTip:!0},{configIndex:4,text:"手术等级",dataIndex:"OperationLevel",renderer:Fm.Common.Util.dataTextRender("EnumOperationLevel"),showTip:!0},{configIndex:5,text:"手术切口分类",dataIndex:"OperationIncisionClassName",showTip:!0},{configIndex:6,text:"手术愈合分级",dataIndex:"OperationHealClass",showTip:!0},{configIndex:7,text:"主次标志",dataIndex:"IsMajorIden",renderer:Fm.Common.Util.dataTextRender("EnumMajorIden")},{configIndex:8,text:"是否医源性手术",dataIndex:"IsIatrogenic",renderer:Fm.Common.Util.dataTextRender("EnumIsIatrogenic"),flex:1}]}};
Ext.ns("CisApp.Config.sys.PublicGrant"),CisApp.Config.sys.PublicGrant={GrantList:function(){return[{xtype:"rownumberer",configIndex:0,text:"序号",width:50},{configIndex:1,text:Fm.Lang.SearchMonth||"预拨月份",dataIndex:"GrantMonth"},{configIndex:2,text:"机构编号",dataIndex:"HospitalId"},{configIndex:3,text:"机构名称",dataIndex:"HospitalName",showTip:!0,width:150},{configIndex:4,text:"上传授权",dataIndex:"IsGroupView",renderer:Fm.Common.Util.dataTextRender(CisApp.Server.Datas.EnumFundPublicity)},{configIndex:5,text:"授权时间",dataIndex:"OperDate",renderer:Fm.Common.Util.dateRender()},{configIndex:6,text:"授权人",dataIndex:"GrantName"},{configIndex:7,text:"授权截止日期",dataIndex:"BackEndDate",minWidth:120,renderer:Fm.Common.Util.dateTextRender(),flex:1}]},AddColumns:function(){return[{configIndex:1,text:"机构编号",dataIndex:"Id",align:"left",minWidth:100,flex:2},{configIndex:2,text:"机构名称",dataIndex:"Name",align:"left",minWidth:150,flex:4},{configIndex:3,text:"机构类型",dataIndex:"Type",minWidth:80,flex:2,renderer:Fm.Common.Util.dataTextRender(CisApp.Server.Datas.EnumHospitalType)},{configIndex:4,text:"机构级别",dataIndex:"P_Level",minWidth:80,flex:2,renderer:Fm.Common.Util.dataTextRender(CisApp.Server.Datas.EnumHospitalLevel)}]}};